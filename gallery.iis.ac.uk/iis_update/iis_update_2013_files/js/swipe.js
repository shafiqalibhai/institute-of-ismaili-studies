(function(_1){if(!Function.prototype.bind){Function.prototype.bind=function(_2){var _3=[].slice,_4=_3.call(arguments,1),_5=this,_6=function(){},_7=function(){return _5.apply(this instanceof _6?this:(_2||{}),_4.concat(_3.call(arguments)));};_6.prototype=_5.prototype;_7.prototype=new _6();return _7;};}if(typeof _1.Code==="undefined"){_1.Code={};}_1.Code.Util={registerNamespace:function(){var _8=arguments,_9=null,i,j,ns,_a,_b;for(i=0;i<_8.length;i++){ns=_8[i];_a=ns.split(".");_b=_a[0];if(typeof _1[_b]==="undefined"){_1[_b]={};}_9=_1[_b];for(j=1;j<_a.length;++j){_9[_a[j]]=_9[_a[j]]||{};_9=_9[_a[j]];}}},coalesce:function(){var i;for(i=0;i<arguments.length;i++){if(!this.isNothing(arguments[i])){return arguments[i];}}return null;},extend:function(_c,_d,_e){var _f;if(this.isNothing(_e)){_e=true;}if(_c&&_d&&this.isObject(_d)){for(_f in _d){if(this.objectHasProperty(_d,_f)){if(_e){_c[_f]=_d[_f];}else{if(typeof _c[_f]==="undefined"){_c[_f]=_d[_f];}}}}}},clone:function(obj){var _10={};this.extend(_10,obj);return _10;},isObject:function(obj){return obj instanceof Object;},isFunction:function(obj){return ({}).toString.call(obj)==="[object Function]";},isArray:function(obj){return obj instanceof Array;},isLikeArray:function(obj){return typeof obj.length==="number";},isNumber:function(obj){return typeof obj==="number";},isString:function(obj){return typeof obj==="string";},isNothing:function(obj){if(typeof obj==="undefined"||obj===null){return true;}return false;},swapArrayElements:function(arr,i,j){var _11=arr[i];arr[i]=arr[j];arr[j]=_11;},trim:function(val){return val.replace(/^\s\s*/,"").replace(/\s\s*$/,"");},toCamelCase:function(val){return val.replace(/(\-[a-z])/g,function($1){return $1.toUpperCase().replace("-","");});},toDashedCase:function(val){return val.replace(/([A-Z])/g,function($1){return "-"+$1.toLowerCase();});},objectHasProperty:function(obj,_12){if(obj.hasOwnProperty){return obj.hasOwnProperty(_12);}else{return ("undefined"!==typeof obj[_12]);}}};}(window));(function(_13,_14){_14.Browser={ua:null,version:null,safari:null,webkit:null,opera:null,msie:null,chrome:null,mozilla:null,android:null,blackberry:null,iPad:null,iPhone:null,iPod:null,iOS:null,is3dSupported:null,isCSSTransformSupported:null,isTouchSupported:null,isGestureSupported:null,_detect:function(){this.ua=_13.navigator.userAgent;this.version=(this.ua.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[]);this.safari=(/Safari/gi).test(_13.navigator.appVersion);this.webkit=/webkit/i.test(this.ua);this.opera=/opera/i.test(this.ua);this.msie=/msie/i.test(this.ua)&&!this.opera;this.chrome=/Chrome/i.test(this.ua);this.mozilla=/mozilla/i.test(this.ua)&&!/(compatible|webkit)/.test(this.ua);this.android=/android/i.test(this.ua);this.blackberry=/blackberry/i.test(this.ua);this.iOS=(/iphone|ipod|ipad/gi).test(_13.navigator.platform);this.iPad=(/ipad/gi).test(_13.navigator.platform);this.iPhone=(/iphone/gi).test(_13.navigator.platform);this.iPod=(/ipod/gi).test(_13.navigator.platform);var _15=document.createElement("div");this.is3dSupported=!_14.isNothing(_15.style.WebkitPerspective);this.isCSSTransformSupported=(!_14.isNothing(_15.style.WebkitTransform)||!_14.isNothing(_15.style.MozTransform)||!_14.isNothing(_15.style.transformProperty));this.isTouchSupported=this.isEventSupported("touchstart");this.isGestureSupported=this.isEventSupported("gesturestart");},_eventTagNames:{"select":"input","change":"input","submit":"form","reset":"form","error":"img","load":"img","abort":"img"},isEventSupported:function(_16){var el=document.createElement(this._eventTagNames[_16]||"div"),_17;_16="on"+_16;_17=_14.objectHasProperty(el,_16);if(!_17){el.setAttribute(_16,"return;");_17=typeof el[_16]==="function";}el=null;return _17;}};_14.Browser._detect();}(window,window.Code.Util));(function(_18,_19){_19.extend(_19,{Events:{add:function(obj,_1a,_1b){this._checkHandlersProperty(obj);if(_1a==="mousewheel"){_1a=this._normaliseMouseWheelType();}if(typeof obj.__eventHandlers[_1a]==="undefined"){obj.__eventHandlers[_1a]=[];}obj.__eventHandlers[_1a].push(_1b);if(this._isBrowserObject(obj)){obj.addEventListener(_1a,_1b,false);}},remove:function(obj,_1c,_1d){this._checkHandlersProperty(obj);if(_1c==="mousewheel"){_1c=this._normaliseMouseWheelType();}if(obj.__eventHandlers[_1c] instanceof Array){var i,len,_1e=obj.__eventHandlers[_1c];if(_19.isNothing(_1d)){if(this._isBrowserObject(obj)){for(i=0;i<_1e.length;i++){obj.removeEventListener(_1c,_1e[i],false);}}obj.__eventHandlers[_1c]=[];return;}for(i=0,len=_1e.length;i<len;i++){if(_1e[i]===_1d){_1e.splice(i,1);break;}}if(this._isBrowserObject(obj)){obj.removeEventListener(_1c,_1d,false);return;}}},fire:function(obj,_1f){var i,len,_20,_21,_22,_23=Array.prototype.slice.call(arguments).splice(2),_24;if(_1f==="mousewheel"){_1f=this._normaliseMouseWheelType();}if(this._isBrowserObject(obj)){if(typeof _1f!=="string"){throw "type must be a string for DOM elements";}_24=this._NATIVE_EVENTS[_1f];_20=document.createEvent(_24?"HTMLEvents":"UIEvents");_20[_24?"initEvent":"initUIEvent"](_1f,true,true,_18,1);if(_23.length<1){obj.dispatchEvent(_20);return;}}this._checkHandlersProperty(obj);if(typeof _1f==="string"){_20={type:_1f};}else{_20=_1f;}if(!_20.target){_20.target=obj;}if(!_20.type){throw new Error("Event object missing 'type' property.");}if(obj.__eventHandlers[_20.type] instanceof Array){_21=obj.__eventHandlers[_20.type];_23.unshift(_20);for(i=0,len=_21.length;i<len;i++){_22=_21[i];if(!_19.isNothing(_22)){_22.apply(obj,_23);}}}},getMousePosition:function(_25){var _26={x:0,y:0};if(_25.pageX){_26.x=_25.pageX;}else{if(_25.clientX){_26.x=_25.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft);}}if(_25.pageY){_26.y=_25.pageY;}else{if(_25.clientY){_26.y=_25.clientY+(document.documentElement.scrollTop||document.body.scrollTop);}}return _26;},getTouchEvent:function(_27){return _27;},getWheelDelta:function(_28){var _29=0;if(!_19.isNothing(_28.wheelDelta)){_29=_28.wheelDelta/120;}else{if(!_19.isNothing(_28.detail)){_29=-_28.detail/3;}}return _29;},domReady:function(_2a){document.addEventListener("DOMContentLoaded",_2a,false);},_checkHandlersProperty:function(obj){if(_19.isNothing(obj.__eventHandlers)){_19.extend(obj,{__eventHandlers:{}});}},_isBrowserObject:function(obj){if(obj===_18||obj===_18.document){return true;}return this._isElement(obj)||this._isNode(obj);},_isElement:function(obj){return (typeof _18.HTMLElement==="object"?obj instanceof _18.HTMLElement:typeof obj==="object"&&obj.nodeType===1&&typeof obj.nodeName==="string");},_isNode:function(obj){return (typeof _18.Node==="object"?obj instanceof _18.Node:typeof obj==="object"&&typeof obj.nodeType==="number"&&typeof obj.nodeName==="string");},_normaliseMouseWheelType:function(){if(_19.Browser.isEventSupported("mousewheel")){return "mousewheel";}return "DOMMouseScroll";},_NATIVE_EVENTS:{click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1}}});}(window,window.Code.Util));(function(_2b,_2c){_2c.extend(_2c,{DOM:{setData:function(el,key,_2d){_2c.DOM.setAttribute(el,"data-"+key,_2d);},getData:function(el,key,_2e){return _2c.DOM.getAttribute(el,"data-"+key,_2e);},removeData:function(el,key){_2c.DOM.removeAttribute(el,"data-"+key);},isChildOf:function(_2f,_30){if(_30===_2f){return false;}while(_2f&&_2f!==_30){_2f=_2f.parentNode;}return _2f===_30;},find:function(_31,_32){if(_2c.isNothing(_32)){_32=_2b.document;}var els=_32.querySelectorAll(_31),_33=[],i;for(i=0;i<els.length;i++){_33.push(els[i]);}return _33;},createElement:function(_34,_35,_36){var _37,_38=document.createElement(_34);for(_37 in _35){if(_2c.objectHasProperty(_35,_37)){_38.setAttribute(_37,_35[_37]);}}_38.innerHTML=_36||"";return _38;},appendChild:function(_39,_3a){_3a.appendChild(_39);},insertBefore:function(_3b,_3c,_3d){_3d.insertBefore(_3b,_3c);},appendText:function(_3e,_3f){_2c.DOM.appendChild(document.createTextNode(_3e),_3f);},appendToBody:function(_40){this.appendChild(_40,document.body);},removeChild:function(_41,_42){_42.removeChild(_41);},removeChildren:function(_43){if(_43.hasChildNodes()){while(_43.childNodes.length>=1){_43.removeChild(_43.childNodes[_43.childNodes.length-1]);}}},hasAttribute:function(el,_44){return !_2c.isNothing(el.getAttribute(_44));},getAttribute:function(el,_45,_46){var _47=el.getAttribute(_45);if(_2c.isNothing(_47)&&!_2c.isNothing(_46)){_47=_46;}return _47;},setAttribute:function(el,_48,_49){el.setAttribute(_48,_49);},removeAttribute:function(el,_4a){if(this.hasAttribute(el,_4a)){el.removeAttribute(_4a);}},addClass:function(el,_4b){var _4c=_2c.DOM.getAttribute(el,"class",""),re=new RegExp("(?:^|\\s+)"+_4b+"(?:\\s+|$)");if(!re.test(_4c)){if(_4c!==""){_4c=_4c+" ";}_4c=_4c+_4b;_2c.DOM.setAttribute(el,"class",_4c);}},removeClass:function(el,_4d){var _4e=_2c.DOM.getAttribute(el,"class",""),_4f=_2c.trim(_4e).split(" "),_50="",i;for(i=0;i<_4f.length;i++){if(_4f[i]!==_4d){if(_50!==""){_50+=" ";}_50+=_4f[i];}}if(_50===""){_2c.DOM.removeAttribute(el,"class");}else{_2c.DOM.setAttribute(el,"class",_50);}},hasClass:function(el,_51){var re=new RegExp("(?:^|\\s+)"+_51+"(?:\\s+|$)");return re.test(_2c.DOM.getAttribute(el,"class",""));},setStyle:function(el,_52,_53){var _54,val;if(_2c.isObject(_52)){for(_54 in _52){if(_2c.objectHasProperty(_52,_54)){if(_54==="width"){_2c.DOM.width(el,_52[_54]);}else{if(_54==="height"){_2c.DOM.height(el,_52[_54]);}else{el.style[_54]=_52[_54];}}}}}else{el.style[_52]=_53;}},getStyle:function(el,_55){var _56=_2b.getComputedStyle(el,"").getPropertyValue(_55);if(_56===""){_56=el.style[_55];}return _56;},hide:function(el){_2c.DOM.setData(el,"ccl-disp",_2c.DOM.getStyle(el,"display"));_2c.DOM.setStyle(el,"display","none");},show:function(el){if(_2c.DOM.getStyle(el,"display")==="none"){var _57=_2c.DOM.getData(el,"ccl-disp","block");if(_57==="none"||_57===""){_57="block";}_2c.DOM.setStyle(el,"display",_57);}},width:function(el,_58){if(!_2c.isNothing(_58)){if(_2c.isNumber(_58)){_58=_58+"px";}el.style.width=_58;}return this._getDimension(el,"width");},outerWidth:function(el){var _59=_2c.DOM.width(el);_59+=parseInt(_2c.DOM.getStyle(el,"padding-left"),10)+parseInt(_2c.DOM.getStyle(el,"padding-right"),10);_59+=parseInt(_2c.DOM.getStyle(el,"margin-left"),10)+parseInt(_2c.DOM.getStyle(el,"margin-right"),10);_59+=parseInt(_2c.DOM.getStyle(el,"border-left-width"),10)+parseInt(_2c.DOM.getStyle(el,"border-right-width"),10);return _59;},height:function(el,_5a){if(!_2c.isNothing(_5a)){if(_2c.isNumber(_5a)){_5a=_5a+"px";}el.style.height=_5a;}return this._getDimension(el,"height");},_getDimension:function(el,_5b){var _5c=_2b.parseInt(_2b.getComputedStyle(el,"").getPropertyValue(_5b)),_5d;if(isNaN(_5c)){_5d={display:el.style.display,left:el.style.left};el.style.display="block";el.style.left="-1000000px";_5c=_2b.parseInt(_2b.getComputedStyle(el,"").getPropertyValue(_5b));el.style.display=_5d.display;el.style.left=_5d.left;}return _5c;},outerHeight:function(el){var _5e=_2c.DOM.height(el);_5e+=parseInt(_2c.DOM.getStyle(el,"padding-top"),10)+parseInt(_2c.DOM.getStyle(el,"padding-bottom"),10);_5e+=parseInt(_2c.DOM.getStyle(el,"margin-top"),10)+parseInt(_2c.DOM.getStyle(el,"margin-bottom"),10);_5e+=parseInt(_2c.DOM.getStyle(el,"border-top-width"),10)+parseInt(_2c.DOM.getStyle(el,"border-bottom-width"),10);return _5e;},documentWidth:function(){return _2c.DOM.width(document.documentElement);},documentHeight:function(){return _2c.DOM.height(document.documentElement);},documentOuterWidth:function(){return _2c.DOM.width(document.documentElement);},documentOuterHeight:function(){return _2c.DOM.outerHeight(document.documentElement);},bodyWidth:function(){return _2c.DOM.width(document.body);},bodyHeight:function(){return _2c.DOM.height(document.body);},bodyOuterWidth:function(){return _2c.DOM.outerWidth(document.body);},bodyOuterHeight:function(){return _2c.DOM.outerHeight(document.body);},windowWidth:function(){return _2b.innerWidth;},windowHeight:function(){return _2b.innerHeight;},windowScrollLeft:function(){return _2b.pageXOffset;},windowScrollTop:function(){return _2b.pageYOffset;}}});}(window,window.Code.Util));(function(_5f,_60){_60.extend(_60,{Animation:{_applyTransitionDelay:50,_transitionEndLabel:(_5f.document.documentElement.style.webkitTransition!==undefined)?"webkitTransitionEnd":"transitionend",_transitionEndHandler:null,_transitionPrefix:(_5f.document.documentElement.style.webkitTransition!==undefined)?"webkitTransition":(_5f.document.documentElement.style.MozTransition!==undefined)?"MozTransition":"transition",_transformLabel:(_5f.document.documentElement.style.webkitTransform!==undefined)?"webkitTransform":(_5f.document.documentElement.style.MozTransition!==undefined)?"MozTransform":"transform",_getTransitionEndHandler:function(){if(_60.isNothing(this._transitionEndHandler)){this._transitionEndHandler=this._onTransitionEnd.bind(this);}return this._transitionEndHandler;},stop:function(el){if(_60.Browser.isCSSTransformSupported){var _61=el.style[this._transitionPrefix+"Property"],_62=(_61!=="")?"ccl"+_61+"callback":"cclallcallback",_63={};_60.Events.remove(el,this._transitionEndLabel,this._getTransitionEndHandler());if(_60.isNothing(el.callbackLabel)){delete el.callbackLabel;}_63[this._transitionPrefix+"Property"]="";_63[this._transitionPrefix+"Duration"]="";_63[this._transitionPrefix+"TimingFunction"]="";_63[this._transitionPrefix+"Delay"]="";_63[this._transformLabel]="";_60.DOM.setStyle(el,_63);}else{if(!_60.isNothing(_5f.jQuery)){_5f.jQuery(el).stop(true,true);}}},fadeIn:function(el,_64,_65,_66){if(_64<=0){_60.DOM.setStyle(el,"opacity",1);if(!_60.isNothing(_65)){_65(el);return;}}var _67=_60.DOM.getStyle(el,"opacity");if(_67>=1){_60.DOM.setStyle(el,"opacity",0);}if(_60.Browser.isCSSTransformSupported){this._applyTransition(el,"opacity",1,_64,_65,_66);}else{if(!_60.isNothing(_5f.jQuery)){_5f.jQuery(el).fadeTo(_64,1,_65);}}},fadeOut:function(el,_68,_69,_6a){if(_68<=0){_60.DOM.setStyle(el,"opacity",0);if(!_60.isNothing(_69)){_69(el);return;}}if(_60.Browser.isCSSTransformSupported){this._applyTransition(el,"opacity",0,_68,_69,_6a);}else{_5f.jQuery(el).fadeTo(_68,0,_69);}},slideBy:function(el,x,y,_6b,_6c,_6d){var _6e={};x=_60.coalesce(x,0);y=_60.coalesce(y,0);_6d=_60.coalesce(_6d,"ease-out");_6e[this._transitionPrefix+"Property"]="all";_6e[this._transitionPrefix+"Delay"]="0";if(_6b===0){_6e[this._transitionPrefix+"Duration"]="";_6e[this._transitionPrefix+"TimingFunction"]="";}else{_6e[this._transitionPrefix+"Duration"]=_6b+"ms";_6e[this._transitionPrefix+"TimingFunction"]=_60.coalesce(_6d,"ease-out");_60.Events.add(el,this._transitionEndLabel,this._getTransitionEndHandler());}_6e[this._transformLabel]=(_60.Browser.is3dSupported)?"translate3d("+x+"px, "+y+"px, 0px)":"translate("+x+"px, "+y+"px)";if(!_60.isNothing(_6c)){el.cclallcallback=_6c;}_60.DOM.setStyle(el,_6e);if(_6b===0){_5f.setTimeout(function(){this._leaveTransforms(el);}.bind(this),this._applyTransitionDelay);}},resetTranslate:function(el){var _6f={};_6f[this._transformLabel]=_6f[this._transformLabel]=(_60.Browser.is3dSupported)?"translate3d(0px, 0px, 0px)":"translate(0px, 0px)";_60.DOM.setStyle(el,_6f);},_applyTransition:function(el,_70,val,_71,_72,_73){var _74={};_73=_60.coalesce(_73,"ease-in");_74[this._transitionPrefix+"Property"]=_70;_74[this._transitionPrefix+"Duration"]=_71+"ms";_74[this._transitionPrefix+"TimingFunction"]=_73;_74[this._transitionPrefix+"Delay"]="0";_60.Events.add(el,this._transitionEndLabel,this._getTransitionEndHandler());_60.DOM.setStyle(el,_74);if(!_60.isNothing(_72)){el["ccl"+_70+"callback"]=_72;}_5f.setTimeout(function(){_60.DOM.setStyle(el,_70,val);},this._applyTransitionDelay);},_onTransitionEnd:function(e){_60.Events.remove(e.currentTarget,this._transitionEndLabel,this._getTransitionEndHandler());this._leaveTransforms(e.currentTarget);},_leaveTransforms:function(el){var _75=el.style[this._transitionPrefix+"Property"],_76=(_75!=="")?"ccl"+_75+"callback":"cclallcallback",_77,_78=_60.coalesce(el.style.webkitTransform,el.style.MozTransform,el.style.transform),_79,_7a,_7b=_5f.parseInt(_60.DOM.getStyle(el,"left"),0),_7c=_5f.parseInt(_60.DOM.getStyle(el,"top"),0),_7d,_7e,_7f={};if(_78!==""){if(_60.Browser.is3dSupported){_79=_78.match(/translate3d\((.*?)\)/);}else{_79=_78.match(/translate\((.*?)\)/);}if(!_60.isNothing(_79)){_7a=_79[1].split(", ");_7d=_5f.parseInt(_7a[0],0);_7e=_5f.parseInt(_7a[1],0);}}_7f[this._transitionPrefix+"Property"]="";_7f[this._transitionPrefix+"Duration"]="";_7f[this._transitionPrefix+"TimingFunction"]="";_7f[this._transitionPrefix+"Delay"]="";_60.DOM.setStyle(el,_7f);_5f.setTimeout(function(){if(!_60.isNothing(_7a)){_7f={};_7f[this._transformLabel]="";_7f.left=(_7b+_7d)+"px";_7f.top=(_7c+_7e)+"px";_60.DOM.setStyle(el,_7f);}if(!_60.isNothing(el[_76])){_77=el[_76];delete el[_76];_77(el);}}.bind(this),this._applyTransitionDelay);}}});}(window,window.Code.Util));(function(_80,_81,_82){_82.registerNamespace("Code.PhotoSwipe.TouchElement");var _83=_80.Code.PhotoSwipe;_83.TouchElement.EventTypes={onTouch:"CodePhotoSwipeTouchElementOnTouch"};_83.TouchElement.ActionTypes={touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",tap:"tap",doubleTap:"doubleTap",swipeLeft:"swipeLeft",swipeRight:"swipeRight",swipeUp:"swipeUp",swipeDown:"swipeDown",gestureStart:"gestureStart",gestureChange:"gestureChange",gestureEnd:"gestureEnd"};}(window,window.klass,window.Code.Util));(function(_84,_85,_86){_86.registerNamespace("Code.PhotoSwipe.TouchElement");var _87=_84.Code.PhotoSwipe;_87.TouchElement.TouchElementClass=_85({el:null,touchSettings:null,touchStartPoint:null,touchEndPoint:null,touchStartTime:null,doubleTapTimeout:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,mouseDownHandler:null,mouseMoveHandler:null,mouseUpHandler:null,mouseOutHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,initialize:function(_88){this.touchSettings={swipeThreshold:50,swipeTimeThreshold:250,doubleTapSpeed:250};_86.extend(this.touchSettings,_88);this.touchStartPoint={x:0,y:0};this.touchEndPoint={x:0,y:0};},addEventHandlers:function(){if(_86.isNothing(this.touchStartHandler)){this.touchStartHandler=this.onTouchStart.bind(this);this.touchMoveHandler=this.onTouchMove.bind(this);this.touchEndHandler=this.onTouchEnd.bind(this);this.mouseDownHandler=this.onMouseDown.bind(this);this.mouseMoveHandler=this.onMouseMove.bind(this);this.mouseUpHandler=this.onMouseUp.bind(this);this.mouseOutHandler=this.onMouseOut.bind(this);this.gestureStartHandler=this.onGestureStart.bind(this);this.gestureChangeHandler=this.onGestureChange.bind(this);this.gestureEndHandler=this.onGestureEnd.bind(this);}_86.Events.add(this.el,"touchstart",this.touchStartHandler);_86.Events.add(this.el,"touchmove",this.touchMoveHandler);_86.Events.add(this.el,"touchend",this.touchEndHandler);_86.Events.add(this.el,"mousedown",this.mouseDownHandler);if(_86.Browser.isGestureSupported){_86.Events.add(this.el,"gesturestart",this.gestureStartHandler);_86.Events.add(this.el,"gesturechange",this.gestureChangeHandler);_86.Events.add(this.el,"gestureend",this.gestureEndHandler);}},removeEventHandlers:function(){_86.Events.remove(this.el,"touchstart",this.touchStartHandler);_86.Events.remove(this.el,"touchmove",this.touchMoveHandler);_86.Events.remove(this.el,"touchend",this.touchEndHandler);_86.Events.remove(this.el,"mousedown",this.mouseDownHandler);if(_86.Browser.isGestureSupported){_86.Events.remove(this.el,"gesturestart",this.gestureStartHandler);_86.Events.remove(this.el,"gesturechange",this.gestureChangeHandler);_86.Events.remove(this.el,"gestureend",this.gestureEndHandler);}},getTouchPoint:function(_89){return {x:_89[0].pageX,y:_89[0].pageY};},fireTouchEvent:function(){var _8a,_8b=0,_8c=0,_8d=0,_8e,_8f,_90;_8b=this.touchEndPoint.x-this.touchStartPoint.x;_8c=this.touchEndPoint.y-this.touchStartPoint.y;_8d=Math.sqrt((_8b*_8b)+(_8c*_8c));_8f=new Date();_90=_8f-this.touchStartTime;if(_90<=this.touchSettings.swipeTimeThreshold){if(_84.Math.abs(_8b)>=this.touchSettings.swipeThreshold){_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:(_8b<0)?_87.TouchElement.ActionTypes.swipeLeft:_87.TouchElement.ActionTypes.swipeRight});return;}if(_84.Math.abs(_8c)>=this.touchSettings.swipeThreshold){_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:(_8c<0)?_87.TouchElement.ActionTypes.swipeUp:_87.TouchElement.ActionTypes.swipeDown});return;}}if(_8d>1){_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint});return;}if(_86.isNothing(this.doubleTapTimeout)){_8e=this;this.doubleTapTimeout=_84.setTimeout(function(){_8e.doubleTapTimeout=null;_86.Events.fire(_8e,{type:_87.TouchElement.EventTypes.onTouch,target:_8e,point:this.touchEndPoint,action:_87.TouchElement.ActionTypes.tap});},this.touchSettings.doubleTapSpeed);return;}else{_84.clearTimeout(this.doubleTapTimeout);this.doubleTapTimeout=null;_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:_87.TouchElement.ActionTypes.doubleTap});}},onTouchStart:function(e){e.preventDefault();_86.Events.remove(this.el,"mousedown",this.mouseDownHandler);var _91=_86.Events.getTouchEvent(e),_92=_91.touches;if(_92.length>1){this.isGesture=true;return;}this.touchStartTime=new Date();this.isGesture=false;this.touchStartPoint=this.getTouchPoint(_92);_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint});},onTouchMove:function(e){e.preventDefault();if(this.isGesture){return;}var _93=_86.Events.getTouchEvent(e),_94=_93.touches;_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.touchMove,point:this.getTouchPoint(_94)});},onTouchEnd:function(e){if(this.isGesture){return;}e.preventDefault();var _95=_86.Events.getTouchEvent(e),_96=(!_86.isNothing(_95.changedTouches))?_95.changedTouches:_95.touches;this.touchEndPoint=this.getTouchPoint(_96);this.fireTouchEvent();},onMouseDown:function(e){e.preventDefault();_86.Events.remove(this.el,"touchstart",this.mouseDownHandler);_86.Events.remove(this.el,"touchmove",this.touchMoveHandler);_86.Events.remove(this.el,"touchend",this.touchEndHandler);_86.Events.add(this.el,"mousemove",this.mouseMoveHandler);_86.Events.add(this.el,"mouseup",this.mouseUpHandler);_86.Events.add(this.el,"mouseout",this.mouseOutHandler);this.touchStartTime=new Date();this.isGesture=false;this.touchStartPoint=_86.Events.getMousePosition(e);_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint});},onMouseMove:function(e){e.preventDefault();_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.touchMove,point:_86.Events.getMousePosition(e)});},onMouseUp:function(e){e.preventDefault();_86.Events.remove(this.el,"mousemove",this.mouseMoveHandler);_86.Events.remove(this.el,"mouseup",this.mouseUpHandler);_86.Events.remove(this.el,"mouseout",this.mouseOutHandler);this.touchEndPoint=_86.Events.getMousePosition(e);this.fireTouchEvent();},onMouseOut:function(e){e.preventDefault();_86.Events.remove(this.el,"mousemove",this.mouseMoveHandler);_86.Events.remove(this.el,"mouseup",this.mouseUpHandler);_86.Events.remove(this.el,"mouseout",this.mouseOutHandler);this.touchEndPoint=_86.Events.getMousePosition(e);this.fireTouchEvent();},onGestureStart:function(e){e.preventDefault();var _97=_86.Events.getTouchEvent(e);_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.gestureStart,scale:_97.scale,rotation:_97.rotation});},onGestureChange:function(e){e.preventDefault();var _98=_86.Events.getTouchEvent(e);_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.gestureChange,scale:_98.scale,rotation:_98.rotation});},onGestureEnd:function(e){e.preventDefault();var _99=_86.Events.getTouchEvent(e);_86.Events.fire(this,{type:_87.TouchElement.EventTypes.onTouch,target:this,action:_87.TouchElement.ActionTypes.gestureEnd,scale:_99.scale,rotation:_99.rotation});}});}(window,window.klass,window.Code.Util));(function(_9a,_9b,_9c){_9c.registerNamespace("Code.PhotoSwipe.Image");var _9d=_9a.Code.PhotoSwipe;_9d.Image.EventTypes={onLoad:"onLoad"};}(window,window.klass,window.Code.Util));(function(_9e,_9f,_a0){_a0.registerNamespace("Code.PhotoSwipe.Image");var _a1=_9e.Code.PhotoSwipe;_a1.Image.ImageClass=_9f({refObj:null,imageEl:null,src:null,caption:null,metaData:null,naturalWidth:null,naturalHeight:null,isLandscape:null,isLoading:null,imageLoadHandler:null,dispose:function(){var _a2,i;this.shrinkImage();for(_a2 in this){if(_a0.objectHasProperty(this,_a2)){this[_a2]=null;}}},initialize:function(_a3,src,_a4,_a5){this.refObj=_a3;this.src=src;this.caption=_a4;this.metaData=_a5;this.naturalWidth=0;this.naturalHeight=0;this.isLandscape=false;this.isLoading=false;this.imageEl=new _9e.Image();this.imageLoadHandler=this.onImageLoad.bind(this);},load:function(){if(this.imageEl.src.indexOf(this.src)>-1){_a0.Events.fire(this,{type:_a1.Image.EventTypes.onLoad,target:this});return;}this.imageEl.isLoading=true;this.imageEl.onload=this.imageLoadHandler;this.imageEl.src=this.src;},shrinkImage:function(){if(_a0.isNothing(this.imageEl)){return;}if(this.imageEl.src.indexOf(this.src)>-1){this.imageEl.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";if(!_a0.isNothing(this.imageEl.parentNode)){_a0.DOM.removeChild(this.imageEl,this.imageEl.parentNode);}}},onImageLoad:function(e){this.imageEl.onload=null;this.imageEl.naturalWidth=_a0.coalesce(this.imageEl.naturalWidth,this.imageEl.width);this.imageEl.naturalHeight=_a0.coalesce(this.imageEl.naturalHeight,this.imageEl.height);this.imageEl.isLandscape=(this.imageEl.naturalWidth>this.imageEl.naturalHeight);this.imageEl.isLoading=false;_a0.Events.fire(this,{type:_a1.Image.EventTypes.onLoad,target:this});}});}(window,window.klass,window.Code.Util));(function(_a6,_a7,_a8){_a8.registerNamespace("Code.PhotoSwipe.Cache");var _a9=_a6.Code.PhotoSwipe;_a9.Cache.Mode={normal:"normal",aggressive:"aggressive"};_a9.Cache.Functions={getImageSource:function(el){return el.href;},getImageCaption:function(el){if(el.nodeName==="IMG"){return _a8.DOM.getAttribute(el,"alt");}var i,_aa;for(i=0;i<el.childNodes.length;i++){_aa=el.childNodes[i];if(el.childNodes[i].nodeName==="IMG"){return _a8.DOM.getAttribute(_aa,"alt");}}},getImageMetaData:function(el){return {};}};}(window,window.klass,window.Code.Util));(function(_ab,_ac,_ad,_ae){_ad.registerNamespace("Code.PhotoSwipe.Cache");var _af=_ab.Code.PhotoSwipe;_af.Cache.CacheClass=_ac({images:null,settings:null,dispose:function(){var _b0,i;if(!_ad.isNothing(this.images)){for(i=0;i<this.images.length;i++){this.images[i].dispose();}this.images.length=0;}for(_b0 in this){if(_ad.objectHasProperty(this,_b0)){this[_b0]=null;}}},initialize:function(_b1,_b2){var i,_b3,_b4,src,_b5,_b6;this.settings=_b2;this.images=[];for(i=0;i<_b1.length;i++){_b4=_b1[i];src=this.settings.getImageSource(_b4);_b5=this.settings.getImageCaption(_b4);_b6=this.settings.getImageMetaData(_b4);this.images.push(new _ae.ImageClass(_b4,src,_b5,_b6));}},getImages:function(_b7){var i,_b8=[],_b9;for(i=0;i<_b7.length;i++){_b9=this.images[_b7[i]];if(this.settings.cacheMode===_af.Cache.Mode.aggressive){_b9.cacheDoNotShrink=true;}_b8.push(_b9);}if(this.settings.cacheMode===_af.Cache.Mode.aggressive){for(i=0;i<this.images.length;i++){_b9=this.images[i];if(!_ad.objectHasProperty(_b9,"cacheDoNotShrink")){_b9.shrinkImage();}else{delete _b9.cacheDoNotShrink;}}}return _b8;}});}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Image));(function(_ba,_bb,_bc){_bc.registerNamespace("Code.PhotoSwipe.DocumentOverlay");var _bd=_ba.Code.PhotoSwipe;_bd.DocumentOverlay.CssClasses={documentOverlay:"ps-document-overlay"};}(window,window.klass,window.Code.Util));(function(_be,_bf,_c0){_c0.registerNamespace("Code.PhotoSwipe.DocumentOverlay");var _c1=_be.Code.PhotoSwipe;_c1.DocumentOverlay.DocumentOverlayClass=_bf({el:null,settings:null,initialBodyHeight:null,dispose:function(){var _c2;_c0.Animation.stop(this.el);_c0.DOM.removeChild(this.el,this.el.parentNode);for(_c2 in this){if(_c0.objectHasProperty(this,_c2)){this[_c2]=null;}}},initialize:function(_c3){this.settings=_c3;this.el=_c0.DOM.createElement("div",{"class":_c1.DocumentOverlay.CssClasses.documentOverlay},"");_c0.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,zIndex:this.settings.zIndex});_c0.DOM.hide(this.el);_c0.DOM.appendToBody(this.el);_c0.Animation.resetTranslate(this.el);this.initialBodyHeight=_c0.DOM.bodyOuterHeight();},resetPosition:function(){var _c4=_c0.DOM.windowWidth(),_c5=_c0.DOM.bodyOuterHeight()*2;if(_c5<1){_c5=this.initialBodyHeight;}if(_c0.DOM.windowHeight()>_c5){_c5=_c0.DOM.windowHeight();}_c0.DOM.setStyle(this.el,{width:_c4,height:_c5,top:(this.settings.jQueryMobile)?_c0.DOM.windowScrollTop()+"px":"0px"});},fadeIn:function(_c6,_c7){this.resetPosition();_c0.DOM.setStyle(this.el,"opacity",0);_c0.DOM.show(this.el);_c0.Animation.fadeIn(this.el,_c6,_c7);}});}(window,window.klass,window.Code.Util));(function(_c8,_c9,_ca){_ca.registerNamespace("Code.PhotoSwipe.Carousel");var _cb=_c8.Code.PhotoSwipe;_cb.Carousel.EventTypes={onSlideByEnd:"PhotoSwipeCarouselOnSlideByEnd",onSlideshowStart:"PhotoSwipeCarouselOnSlideshowStart",onSlideshowStop:"PhotoSwipeCarouselOnSlideshowStop"};_cb.Carousel.CssClasses={carousel:"ps-carousel",content:"ps-carousel-content",item:"ps-carousel-item",itemLoading:"ps-carousel-item-loading"};_cb.Carousel.SlideByAction={previous:"previous",current:"current",next:"next"};}(window,window.klass,window.Code.Util));(function(_cc,_cd,_ce){_ce.registerNamespace("Code.PhotoSwipe.Carousel");var _cf=_cc.Code.PhotoSwipe;_cf.Carousel.CarouselClass=_cd({el:null,contentEl:null,settings:null,cache:null,slideByEndHandler:null,currentCacheIndex:null,isSliding:null,isSlideshowActive:null,lastSlideByAction:null,touchStartPoint:null,touchStartPosition:null,imageLoadHandler:null,slideshowTimeout:null,dispose:function(){var _d0;this.stopSlideshow();_ce.Animation.stop(this.el);_ce.DOM.removeChild(this.el,this.el.parentNode);for(_d0 in this){if(_ce.objectHasProperty(this,_d0)){this[_d0]=null;}}},initialize:function(_d1,_d2){var i,_d3,_d4;this.cache=_d1;this.settings=_d2;this.slideByEndHandler=this.onSlideByEnd.bind(this);this.imageLoadHandler=this.onImageLoad.bind(this);this.currentCacheIndex=0;this.isSliding=false;this.isSlideshowActive=false;if(this.cache.images.length<3){this.settings.loop=false;}this.el=_ce.DOM.createElement("div",{"class":_cf.Carousel.CssClasses.carousel},"");_ce.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex});_ce.DOM.hide(this.el);this.contentEl=_ce.DOM.createElement("div",{"class":_cf.Carousel.CssClasses.content},"");_ce.DOM.setStyle(this.contentEl,{display:"block",position:"absolute",left:0,top:0});_ce.DOM.appendChild(this.contentEl,this.el);_d3=(_d1.images.length<3)?_d1.images.length:3;for(i=0;i<_d3;i++){_d4=_ce.DOM.createElement("div",{"class":_cf.Carousel.CssClasses.item+" "+_cf.Carousel.CssClasses.item+"-"+i},"");_ce.DOM.setAttribute(_d4,"style","float: left;");_ce.DOM.setStyle(_d4,{display:"block",position:"relative",left:0,top:0,overflow:"hidden"});if(this.settings.margin>0){_ce.DOM.setStyle(_d4,{marginRight:this.settings.margin+"px"});}_ce.DOM.appendChild(_d4,this.contentEl);}_ce.DOM.appendToBody(this.el);},resetPosition:function(){var _d5=_ce.DOM.windowWidth(),_d6=_ce.DOM.windowHeight(),_d7=(this.settings.margin>0)?_d5+this.settings.margin:_d5,_d8=_ce.DOM.find("."+_cf.Carousel.CssClasses.item,this.contentEl),_d9=_d7*_d8.length,i,_da,_db;_ce.DOM.setStyle(this.el,{top:_ce.DOM.windowScrollTop()+"px",width:_d5,height:_d6});_ce.DOM.setStyle(this.contentEl,{width:_d9,height:_d6});for(i=0;i<_d8.length;i++){_da=_d8[i];_ce.DOM.setStyle(_da,{width:_d5,height:_d6});_db=_ce.DOM.find("img",_da)[0];if(!_ce.isNothing(_db)){this.resetImagePosition(_db);}}this.setContentLeftPosition();},resetImagePosition:function(_dc){if(_ce.isNothing(_dc)){return;}var src=_ce.DOM.getAttribute(_dc,"src"),_dd,_de,_df,_e0,_e1,_e2=_ce.DOM.width(this.el),_e3=_ce.DOM.height(this.el);if(this.settings.imageScaleMethod==="fitNoUpscale"){_de=_dc.naturalWidth;_df=_dc.naturalHeight;if(_de>_e2){_dd=_e2/_de;_de=Math.round(_de*_dd);_df=Math.round(_df*_dd);}if(_df>_e3){_dd=_e3/_df;_df=Math.round(_df*_dd);_de=Math.round(_de*_dd);}}else{if(_dc.isLandscape){_dd=_e2/_dc.naturalWidth;}else{_dd=_e3/_dc.naturalHeight;}_de=Math.round(_dc.naturalWidth*_dd);_df=Math.round(_dc.naturalHeight*_dd);if(this.settings.imageScaleMethod==="zoom"){_dd=1;if(_df<_e3){_dd=_e3/_df;}else{if(_de<_e2){_dd=_e2/_de;}}if(_dd!==1){_de=Math.round(_de*_dd);_df=Math.round(_df*_dd);}}else{if(this.settings.imageScaleMethod==="fit"){_dd=1;if(_de>_e2){_dd=_e2/_de;}else{if(_df>_e3){_dd=_e3/_df;}}if(_dd!==1){_de=Math.round(_de*_dd);_df=Math.round(_df*_dd);}}}}_e0=Math.round(((_e3-_df)/2))+"px";_e1=Math.round(((_e2-_de)/2))+"px";_ce.DOM.setStyle(_dc,{position:"absolute",width:_de,height:_df,top:_e0,left:_e1,display:"block"});},setContentLeftPosition:function(){var _e4=_ce.DOM.windowWidth(),_e5=this.getItemEls(),_e6=0;if(this.settings.loop){_e6=(_e4+this.settings.margin)*-1;}else{if(this.currentCacheIndex===this.cache.images.length-1){_e6=((_e5.length-1)*(_e4+this.settings.margin))*-1;}else{if(this.currentCacheIndex>0){_e6=(_e4+this.settings.margin)*-1;}}}_ce.DOM.setStyle(this.contentEl,{left:_e6+"px"});},show:function(_e7){this.currentCacheIndex=_e7;this.resetPosition();this.setImages(false);_ce.DOM.show(this.el);_ce.Animation.resetTranslate(this.contentEl);var _e8=this.getItemEls(),i;for(i=0;i<_e8.length;i++){_ce.Animation.resetTranslate(_e8[i]);}_ce.Events.fire(this,{type:_cf.Carousel.EventTypes.onSlideByEnd,target:this,action:_cf.Carousel.SlideByAction.current,cacheIndex:this.currentCacheIndex});},setImages:function(_e9){var _ea,_eb=this.getItemEls(),_ec=this.currentCacheIndex+1,_ed=this.currentCacheIndex-1;if(this.settings.loop){if(_ec>this.cache.images.length-1){_ec=0;}if(_ed<0){_ed=this.cache.images.length-1;}_ea=this.cache.getImages([_ed,this.currentCacheIndex,_ec]);if(!_e9){this.addCacheImageToItemEl(_ea[1],_eb[1]);}this.addCacheImageToItemEl(_ea[2],_eb[2]);this.addCacheImageToItemEl(_ea[0],_eb[0]);}else{if(_eb.length===1){if(!_e9){_ea=this.cache.getImages([this.currentCacheIndex]);this.addCacheImageToItemEl(_ea[0],_eb[0]);}}else{if(_eb.length===2){if(this.currentCacheIndex===0){_ea=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1]);if(!_e9){this.addCacheImageToItemEl(_ea[0],_eb[0]);}this.addCacheImageToItemEl(_ea[1],_eb[1]);}else{_ea=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex]);if(!_e9){this.addCacheImageToItemEl(_ea[1],_eb[1]);}this.addCacheImageToItemEl(_ea[0],_eb[0]);}}else{if(this.currentCacheIndex===0){_ea=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1,this.currentCacheIndex+2]);if(!_e9){this.addCacheImageToItemEl(_ea[0],_eb[0]);}this.addCacheImageToItemEl(_ea[1],_eb[1]);this.addCacheImageToItemEl(_ea[2],_eb[2]);}else{if(this.currentCacheIndex===this.cache.images.length-1){_ea=this.cache.getImages([this.currentCacheIndex-2,this.currentCacheIndex-1,this.currentCacheIndex]);if(!_e9){this.addCacheImageToItemEl(_ea[2],_eb[2]);}this.addCacheImageToItemEl(_ea[1],_eb[1]);this.addCacheImageToItemEl(_ea[0],_eb[0]);}else{_ea=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex,this.currentCacheIndex+1]);if(!_e9){this.addCacheImageToItemEl(_ea[1],_eb[1]);}this.addCacheImageToItemEl(_ea[2],_eb[2]);this.addCacheImageToItemEl(_ea[0],_eb[0]);}}}}}},addCacheImageToItemEl:function(_ee,_ef){_ce.DOM.addClass(_ef,_cf.Carousel.CssClasses.itemLoading);_ce.DOM.removeChildren(_ef);_ce.DOM.setStyle(_ee.imageEl,{display:"none"});_ce.DOM.appendChild(_ee.imageEl,_ef);_ce.Animation.resetTranslate(_ee.imageEl);_ce.Events.add(_ee,_cf.Image.EventTypes.onLoad,this.imageLoadHandler);_ee.load();},slideCarousel:function(_f0,_f1,_f2){if(this.isSliding){return;}var _f3=_ce.DOM.windowWidth()+this.settings.margin,_f4,_f5;_f2=_ce.coalesce(_f2,this.settings.slideSpeed);if(_cc.Math.abs(_f4)<1){return;}switch(_f1){case _cf.TouchElement.ActionTypes.swipeLeft:_f5=_f3*-1;break;case _cf.TouchElement.ActionTypes.swipeRight:_f5=_f3;break;default:_f4=_f0.x-this.touchStartPoint.x;if(_cc.Math.abs(_f4)>_f3/2){_f5=(_f4>0)?_f3:_f3*-1;}else{_f5=0;}break;}if(_f5<0){this.lastSlideByAction=_cf.Carousel.SlideByAction.next;}else{if(_f5>0){this.lastSlideByAction=_cf.Carousel.SlideByAction.previous;}else{this.lastSlideByAction=_cf.Carousel.SlideByAction.current;}}if(!this.settings.loop){if((this.lastSlideByAction===_cf.Carousel.SlideByAction.previous&&this.currentCacheIndex===0)||(this.lastSlideByAction===_cf.Carousel.SlideByAction.next&&this.currentCacheIndex===this.cache.images.length-1)){_f5=0;this.lastSlideByAction=_cf.Carousel.SlideByAction.current;}}this.isSliding=true;this.doSlideCarousel(_f5,_f2);},moveCarousel:function(_f6){if(this.isSliding){return;}if(!this.settings.enableDrag){return;}this.doMoveCarousel(_f6.x-this.touchStartPoint.x);},getItemEls:function(){return _ce.DOM.find("."+_cf.Carousel.CssClasses.item,this.contentEl);},previous:function(){this.stopSlideshow();this.slideCarousel({x:0,y:0},_cf.TouchElement.ActionTypes.swipeRight,this.settings.nextPreviousSlideSpeed);},next:function(){this.stopSlideshow();this.slideCarousel({x:0,y:0},_cf.TouchElement.ActionTypes.swipeLeft,this.settings.nextPreviousSlideSpeed);},slideshowNext:function(){this.slideCarousel({x:0,y:0},_cf.TouchElement.ActionTypes.swipeLeft);},startSlideshow:function(){this.stopSlideshow();this.isSlideshowActive=true;this.slideshowTimeout=_cc.setTimeout(this.slideshowNext.bind(this),this.settings.slideshowDelay);_ce.Events.fire(this,{type:_cf.Carousel.EventTypes.onSlideshowStart,target:this});},stopSlideshow:function(){if(!_ce.isNothing(this.slideshowTimeout)){_cc.clearTimeout(this.slideshowTimeout);this.slideshowTimeout=null;this.isSlideshowActive=false;_ce.Events.fire(this,{type:_cf.Carousel.EventTypes.onSlideshowStop,target:this});}},onSlideByEnd:function(e){if(_ce.isNothing(this.isSliding)){return;}var _f7=this.getItemEls();this.isSliding=false;if(this.lastSlideByAction===_cf.Carousel.SlideByAction.next){this.currentCacheIndex=this.currentCacheIndex+1;}else{if(this.lastSlideByAction===_cf.Carousel.SlideByAction.previous){this.currentCacheIndex=this.currentCacheIndex-1;}}if(this.settings.loop){if(this.lastSlideByAction===_cf.Carousel.SlideByAction.next){_ce.DOM.appendChild(_f7[0],this.contentEl);}else{if(this.lastSlideByAction===_cf.Carousel.SlideByAction.previous){_ce.DOM.insertBefore(_f7[_f7.length-1],_f7[0],this.contentEl);}}if(this.currentCacheIndex<0){this.currentCacheIndex=this.cache.images.length-1;}else{if(this.currentCacheIndex===this.cache.images.length){this.currentCacheIndex=0;}}}else{if(this.cache.images.length>3){if(this.currentCacheIndex>1&&this.currentCacheIndex<this.cache.images.length-2){if(this.lastSlideByAction===_cf.Carousel.SlideByAction.next){_ce.DOM.appendChild(_f7[0],this.contentEl);}else{if(this.lastSlideByAction===_cf.Carousel.SlideByAction.previous){_ce.DOM.insertBefore(_f7[_f7.length-1],_f7[0],this.contentEl);}}}else{if(this.currentCacheIndex===1){if(this.lastSlideByAction===_cf.Carousel.SlideByAction.previous){_ce.DOM.insertBefore(_f7[_f7.length-1],_f7[0],this.contentEl);}}else{if(this.currentCacheIndex===this.cache.images.length-2){if(this.lastSlideByAction===_cf.Carousel.SlideByAction.next){_ce.DOM.appendChild(_f7[0],this.contentEl);}}}}}}if(this.lastSlideByAction!==_cf.Carousel.SlideByAction.current){this.setContentLeftPosition();this.setImages(true);}_ce.Events.fire(this,{type:_cf.Carousel.EventTypes.onSlideByEnd,target:this,action:this.lastSlideByAction,cacheIndex:this.currentCacheIndex});if(this.isSlideshowActive){if(this.lastSlideByAction!==_cf.Carousel.SlideByAction.current){this.startSlideshow();}else{this.stopSlideshow();}}},onTouch:function(_f8,_f9){this.stopSlideshow();switch(_f8){case _cf.TouchElement.ActionTypes.touchStart:this.touchStartPoint=_f9;this.touchStartPosition={x:_cc.parseInt(_ce.DOM.getStyle(this.contentEl,"left"),0),y:_cc.parseInt(_ce.DOM.getStyle(this.contentEl,"top"),0)};break;case _cf.TouchElement.ActionTypes.touchMove:this.moveCarousel(_f9);break;case _cf.TouchElement.ActionTypes.touchEnd:case _cf.TouchElement.ActionTypes.swipeLeft:case _cf.TouchElement.ActionTypes.swipeRight:this.slideCarousel(_f9,_f8);break;case _cf.TouchElement.ActionTypes.tap:break;case _cf.TouchElement.ActionTypes.doubleTap:break;}},onImageLoad:function(e){var _fa=e.target;if(!_ce.isNothing(_fa.imageEl.parentNode)){_ce.DOM.removeClass(_fa.imageEl.parentNode,_cf.Carousel.CssClasses.itemLoading);_ce.Events.remove(_fa,_cf.Image.EventTypes.onLoad,this.imageLoadHandler);this.resetImagePosition(_fa.imageEl);}}});}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement));(function(_fb,_fc,_fd,_fe){_fd.registerNamespace("Code.PhotoSwipe.Carousel");var _ff=_fb.Code.PhotoSwipe;_ff.Carousel.CarouselClass=_ff.Carousel.CarouselClass.extend({getStartingPos:function(){var _100=this.touchStartPosition;if(_fd.isNothing(_100)){_100={x:_fb.parseInt(_fd.DOM.getStyle(this.contentEl,"left"),0),y:_fb.parseInt(_fd.DOM.getStyle(this.contentEl,"top"),0)};}return _100;},doMoveCarousel:function(xVal){var _101;if(_fd.Browser.isCSSTransformSupported){_101={};_101[_fd.Animation._transitionPrefix+"Property"]="all";_101[_fd.Animation._transitionPrefix+"Duration"]="";_101[_fd.Animation._transitionPrefix+"TimingFunction"]="";_101[_fd.Animation._transitionPrefix+"Delay"]="0";_101[_fd.Animation._transformLabel]=(_fd.Browser.is3dSupported)?"translate3d("+xVal+"px, 0px, 0px)":"translate("+xVal+"px, 0px)";_fd.DOM.setStyle(this.contentEl,_101);}else{if(!_fd.isNothing(_fb.jQuery)){_fb.jQuery(this.contentEl).stop().css("left",this.getStartingPos().x+xVal+"px");}}},doSlideCarousel:function(xVal,_102){var _103;if(_102<=0){this.slideByEndHandler();return;}if(_fd.Browser.isCSSTransformSupported){_fd.Animation.slideBy(this.contentEl,xVal,0,_102,this.slideByEndHandler,this.settings.slideTimingFunction);}else{if(!_fd.isNothing(_fb.jQuery)){_103={left:this.getStartingPos().x+xVal+"px"};if(this.settings.animationTimingFunction==="ease-out"){this.settings.animationTimingFunction="easeOutQuad";}if(_fd.isNothing(_fb.jQuery.easing[this.settings.animationTimingFunction])){this.settings.animationTimingFunction="linear";}_fb.jQuery(this.contentEl).animate(_103,this.settings.slideSpeed,this.settings.animationTimingFunction,this.slideByEndHandler);}}}});}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement));(function(_104,_105,Util){Util.registerNamespace("Code.PhotoSwipe.Toolbar");var _106=_104.Code.PhotoSwipe;_106.Toolbar.CssClasses={toolbar:"ps-toolbar",toolbarContent:"ps-toolbar-content",toolbarTop:"ps-toolbar-top",caption:"ps-caption",captionBottom:"ps-caption-bottom",captionContent:"ps-caption-content",close:"ps-toolbar-close",play:"ps-toolbar-play",previous:"ps-toolbar-previous",previousDisabled:"ps-toolbar-previous-disabled",next:"ps-toolbar-next",nextDisabled:"ps-toolbar-next-disabled"};_106.Toolbar.ToolbarAction={close:"close",play:"play",next:"next",previous:"previous",none:"none"};_106.Toolbar.EventTypes={onTap:"PhotoSwipeToolbarOnClick",onBeforeShow:"PhotoSwipeToolbarOnBeforeShow",onShow:"PhotoSwipeToolbarOnShow",onBeforeHide:"PhotoSwipeToolbarOnBeforeHide",onHide:"PhotoSwipeToolbarOnHide"};_106.Toolbar.getToolbar=function(){return "<div class=\""+_106.Toolbar.CssClasses.close+"\"><div class=\""+_106.Toolbar.CssClasses.toolbarContent+"\"></div></div><div class=\""+_106.Toolbar.CssClasses.play+"\"><div class=\""+_106.Toolbar.CssClasses.toolbarContent+"\"></div></div><div class=\""+_106.Toolbar.CssClasses.previous+"\"><div class=\""+_106.Toolbar.CssClasses.toolbarContent+"\"></div></div><div class=\""+_106.Toolbar.CssClasses.next+"\"><div class=\""+_106.Toolbar.CssClasses.toolbarContent+"\"></div></div>";};}(window,window.klass,window.Code.Util));(function(_107,_108,Util){Util.registerNamespace("Code.PhotoSwipe.Toolbar");var _109=_107.Code.PhotoSwipe;_109.Toolbar.ToolbarClass=_108({toolbarEl:null,closeEl:null,playEl:null,previousEl:null,nextEl:null,captionEl:null,captionContentEl:null,currentCaption:null,settings:null,cache:null,timeout:null,isVisible:null,fadeOutHandler:null,touchStartHandler:null,touchMoveHandler:null,clickHandler:null,dispose:function(){var prop;this.clearTimeout();this.removeEventHandlers();Util.Animation.stop(this.toolbarEl);Util.Animation.stop(this.captionEl);Util.DOM.removeChild(this.toolbarEl,this.toolbarEl.parentNode);Util.DOM.removeChild(this.captionEl,this.captionEl.parentNode);for(prop in this){if(Util.objectHasProperty(this,prop)){this[prop]=null;}}},initialize:function(_10a,_10b){var _10c;this.settings=_10b;this.cache=_10a;this.isVisible=false;this.fadeOutHandler=this.onFadeOut.bind(this);this.touchStartHandler=this.onTouchStart.bind(this);this.touchMoveHandler=this.onTouchMove.bind(this);this.clickHandler=this.onClick.bind(this);_10c=_109.Toolbar.CssClasses.toolbar;if(this.settings.captionAndToolbarFlipPosition){_10c=_10c+" "+_109.Toolbar.CssClasses.toolbarTop;}this.toolbarEl=Util.DOM.createElement("div",{"class":_10c},this.settings.getToolbar());Util.DOM.setStyle(this.toolbarEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex});Util.DOM.appendToBody(this.toolbarEl);Util.DOM.hide(this.toolbarEl);this.closeEl=Util.DOM.find("."+_109.Toolbar.CssClasses.close,this.toolbarEl)[0];if(this.settings.preventHide&&!Util.isNothing(this.closeEl)){Util.DOM.hide(this.closeEl);}this.playEl=Util.DOM.find("."+_109.Toolbar.CssClasses.play,this.toolbarEl)[0];if(this.settings.preventSlideshow&&!Util.isNothing(this.playEl)){Util.DOM.hide(this.playEl);}this.nextEl=Util.DOM.find("."+_109.Toolbar.CssClasses.next,this.toolbarEl)[0];this.previousEl=Util.DOM.find("."+_109.Toolbar.CssClasses.previous,this.toolbarEl)[0];_10c=_109.Toolbar.CssClasses.caption;if(this.settings.captionAndToolbarFlipPosition){_10c=_10c+" "+_109.Toolbar.CssClasses.captionBottom;}this.captionEl=Util.DOM.createElement("div",{"class":_10c},"");Util.DOM.setStyle(this.captionEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex});Util.DOM.appendToBody(this.captionEl);Util.DOM.hide(this.captionEl);this.captionContentEl=Util.DOM.createElement("div",{"class":_109.Toolbar.CssClasses.captionContent},"");Util.DOM.appendChild(this.captionContentEl,this.captionEl);this.addEventHandlers();},resetPosition:function(){var _10d,_10e;if(this.settings.captionAndToolbarFlipPosition){_10d=Util.DOM.windowScrollTop();_10e=(Util.DOM.windowScrollTop()+Util.DOM.windowHeight())-Util.DOM.height(this.captionEl);}else{_10d=(Util.DOM.windowScrollTop()+Util.DOM.windowHeight())-Util.DOM.height(this.toolbarEl);_10e=Util.DOM.windowScrollTop();}Util.DOM.setStyle(this.toolbarEl,{top:_10d+"px",width:Util.DOM.windowWidth()});Util.DOM.setStyle(this.captionEl,{top:_10e+"px",width:Util.DOM.windowWidth()});},toggleVisibility:function(_10f){if(this.isVisible){this.fadeOut();}else{this.show(_10f);}},show:function(_110){Util.Animation.stop(this.toolbarEl);Util.Animation.stop(this.captionEl);this.resetPosition();this.setToolbarStatus(_110);Util.Events.fire(this,{type:_109.Toolbar.EventTypes.onBeforeShow,target:this});this.showToolbar();this.setCaption(_110);this.showCaption();this.isVisible=true;this.setTimeout();Util.Events.fire(this,{type:_109.Toolbar.EventTypes.onShow,target:this});},setTimeout:function(){if(this.settings.captionAndToolbarAutoHideDelay>0){this.clearTimeout();this.timeout=_107.setTimeout(this.fadeOut.bind(this),this.settings.captionAndToolbarAutoHideDelay);}},clearTimeout:function(){if(!Util.isNothing(this.timeout)){_107.clearTimeout(this.timeout);this.timeout=null;}},fadeOut:function(){this.clearTimeout();Util.Events.fire(this,{type:_109.Toolbar.EventTypes.onBeforeHide,target:this});Util.Animation.fadeOut(this.toolbarEl,this.settings.fadeOutSpeed);Util.Animation.fadeOut(this.captionEl,this.settings.fadeOutSpeed,this.fadeOutHandler);this.isVisible=false;},addEventHandlers:function(){if(Util.Browser.isTouchSupported){if(!Util.Browser.blackberry){Util.Events.add(this.toolbarEl,"touchstart",this.touchStartHandler);}Util.Events.add(this.toolbarEl,"touchmove",this.touchMoveHandler);Util.Events.add(this.captionEl,"touchmove",this.touchMoveHandler);}Util.Events.add(this.toolbarEl,"click",this.clickHandler);},removeEventHandlers:function(){if(Util.Browser.isTouchSupported){if(!Util.Browser.blackberry){Util.Events.remove(this.toolbarEl,"touchstart",this.touchStartHandler);}Util.Events.remove(this.toolbarEl,"touchmove",this.touchMoveHandler);Util.Events.remove(this.captionEl,"touchmove",this.touchMoveHandler);}Util.Events.remove(this.toolbarEl,"click",this.clickHandler);},handleTap:function(e){this.clearTimeout();var _111;if(e.target===this.nextEl||Util.DOM.isChildOf(e.target,this.nextEl)){_111=_109.Toolbar.ToolbarAction.next;}else{if(e.target===this.previousEl||Util.DOM.isChildOf(e.target,this.previousEl)){_111=_109.Toolbar.ToolbarAction.previous;}else{if(e.target===this.closeEl||Util.DOM.isChildOf(e.target,this.closeEl)){_111=_109.Toolbar.ToolbarAction.close;}else{if(e.target===this.playEl||Util.DOM.isChildOf(e.target,this.playEl)){_111=_109.Toolbar.ToolbarAction.play;}}}}this.setTimeout();if(Util.isNothing(_111)){_111=_109.Toolbar.ToolbarAction.none;}Util.Events.fire(this,{type:_109.Toolbar.EventTypes.onTap,target:this,action:_111,tapTarget:e.target});},setCaption:function(_112){Util.DOM.removeChildren(this.captionContentEl);this.currentCaption=Util.coalesce(this.cache.images[_112].caption,"?");if(Util.isObject(this.currentCaption)){Util.DOM.appendChild(this.currentCaption,this.captionContentEl);}else{if(this.currentCaption===""){this.currentCaption="?";}Util.DOM.appendText(this.currentCaption,this.captionContentEl);}this.currentCaption=(this.currentCaption==="?")?"":this.currentCaption;},showToolbar:function(){Util.DOM.setStyle(this.toolbarEl,{opacity:this.settings.captionAndToolbarOpacity});Util.DOM.show(this.toolbarEl);},showCaption:function(){if(this.currentCaption===""||this.captionContentEl.childNodes.length<1){if(!this.settings.captionAndToolbarShowEmptyCaptions){Util.DOM.hide(this.captionEl);return;}}Util.DOM.setStyle(this.captionEl,{opacity:this.settings.captionAndToolbarOpacity});Util.DOM.show(this.captionEl);},setToolbarStatus:function(_113){if(this.settings.loop){return;}if(_113>0&&_113<this.cache.images.length-1){Util.DOM.removeClass(this.previousEl,_109.Toolbar.CssClasses.previousDisabled);Util.DOM.removeClass(this.nextEl,_109.Toolbar.CssClasses.nextDisabled);return;}if(_113===0){if(!Util.isNothing(this.previousEl)){Util.DOM.addClass(this.previousEl,_109.Toolbar.CssClasses.previousDisabled);}}if(_113===this.cache.images.length-1){if(!Util.isNothing(this.nextEl)){Util.DOM.addClass(this.nextEl,_109.Toolbar.CssClasses.nextDisabled);}}},onFadeOut:function(){Util.DOM.hide(this.toolbarEl);Util.DOM.hide(this.captionEl);Util.Events.fire(this,{type:_109.Toolbar.EventTypes.onHide,target:this});},onTouchStart:function(e){e.preventDefault();Util.Events.remove(this.toolbarEl,"click",this.clickHandler);this.handleTap(e);},onTouchMove:function(e){e.preventDefault();},onClick:function(e){e.preventDefault();this.handleTap(e);}});}(window,window.klass,window.Code.Util));(function(_114,_115,Util){Util.registerNamespace("Code.PhotoSwipe.UILayer");var _116=_114.Code.PhotoSwipe;_116.UILayer.CssClasses={uiLayer:"ps-uilayer"};}(window,window.klass,window.Code.Util));(function(_117,_118,Util,_119){Util.registerNamespace("Code.PhotoSwipe.UILayer");var _11a=_117.Code.PhotoSwipe;_11a.UILayer.UILayerClass=_119.TouchElementClass.extend({el:null,settings:null,dispose:function(){var prop;this.removeEventHandlers();Util.DOM.removeChild(this.el,this.el.parentNode);for(prop in this){if(Util.objectHasProperty(this,prop)){this[prop]=null;}}},initialize:function(_11b){this.settings=_11b;this.supr({swipeThreshold:this.settings.swipeThreshold,swipeTimeThreshold:this.settings.swipeTimeThreshold,doubleTapSpeed:this.settings.doubleTapSpeed});this.el=Util.DOM.createElement("div",{"class":_11a.UILayer.CssClasses.uiLayer},"");Util.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex,opacity:0});Util.DOM.hide(this.el);Util.DOM.appendToBody(this.el);},resetPosition:function(){Util.DOM.setStyle(this.el,{top:Util.DOM.windowScrollTop()+"px",width:Util.DOM.windowWidth(),height:Util.DOM.windowHeight()});},show:function(){this.resetPosition();Util.DOM.show(this.el);this.addEventHandlers();},addEventHandlers:function(){this.supr();},removeEventHandlers:function(){this.supr();}});}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement));(function(_11c,_11d,Util){Util.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");var _11e=_11c.Code.PhotoSwipe;_11e.ZoomPanRotate.CssClasses={zoomPanRotate:"ps-zoom-pan-rotate"};}(window,window.klass,window.Code.Util));(function(_11f,_120,Util){Util.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");var _121=_11f.Code.PhotoSwipe;_121.ZoomPanRotate.ZoomPanRotateClass=_120({el:null,settings:null,containerEl:null,imageEl:null,transformSettings:null,panStartingPoint:null,transformEl:null,dispose:function(){var prop;Util.DOM.removeChild(this.el,this.el.parentNode);for(prop in this){if(Util.objectHasProperty(this,prop)){this[prop]=null;}}},initialize:function(_122,_123,_124){this.settings=_122;this.imageEl=_123.imageEl.cloneNode(false);Util.DOM.setStyle(this.imageEl,{zIndex:1});this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0};this.el=Util.DOM.createElement("div",{"class":_121.ZoomPanRotate.CssClasses.zoomPanRotate},"");Util.DOM.setStyle(this.el,{left:0,top:Util.DOM.windowScrollTop()+"px",position:"absolute",width:Util.DOM.windowWidth(),height:Util.DOM.windowHeight(),zIndex:this.settings.zIndex,display:"block"});Util.DOM.insertBefore(this.el,_124.el,document.body);if(Util.Browser.iOS){this.containerEl=Util.DOM.createElement("div");Util.DOM.setStyle(this.containerEl,{left:0,top:0,width:Util.DOM.windowWidth(),height:Util.DOM.windowHeight(),position:"absolute",zIndex:1});Util.DOM.appendChild(this.imageEl,this.containerEl);Util.DOM.appendChild(this.containerEl,this.el);Util.Animation.resetTranslate(this.containerEl);Util.Animation.resetTranslate(this.imageEl);this.transformEl=this.containerEl;}else{Util.DOM.appendChild(this.imageEl,this.el);this.transformEl=this.imageEl;}},setStartingTranslateFromCurrentTransform:function(){var _125=Util.coalesce(this.transformEl.style.webkitTransform,this.transformEl.style.MozTransform,this.transformEl.style.transform),_126;if(!Util.isNothing(_125)){_126=_125.match(/translate\((.*?)\)/);if(!Util.isNothing(_126)){_126=_126[1].split(", ");this.transformSettings.startingTranslateX=_11f.parseInt(_126[0],10);this.transformSettings.startingTranslateY=_11f.parseInt(_126[1],10);}}},getScale:function(_127){var _128=this.transformSettings.startingScale*_127;if(this.settings.minUserZoom!==0&&_128<this.settings.minUserZoom){_128=this.settings.minUserZoom;}else{if(this.settings.maxUserZoom!==0&&_128>this.settings.maxUserZoom){_128=this.settings.maxUserZoom;}}return _128;},setStartingScaleAndRotation:function(_129,_12a){this.transformSettings.startingScale=this.getScale(_129);this.transformSettings.startingRotation=(this.transformSettings.startingRotation+_12a)%360;},zoomRotate:function(_12b,_12c){this.transformSettings.scale=this.getScale(_12b);this.transformSettings.rotation=this.transformSettings.startingRotation+_12c;this.applyTransform();},panStart:function(_12d){this.setStartingTranslateFromCurrentTransform();this.panStartingPoint={x:_12d.x,y:_12d.y};},pan:function(_12e){var dx=_12e.x-this.panStartingPoint.x,dy=_12e.y-this.panStartingPoint.y,_12f=dx/this.transformSettings.scale,_130=dy/this.transformSettings.scale;this.transformSettings.translateX=this.transformSettings.startingTranslateX+_12f;this.transformSettings.translateY=this.transformSettings.startingTranslateY+_130;this.applyTransform();},zoomAndPanToPoint:function(_131,_132){this.panStart({x:Util.DOM.bodyWidth()/2,y:Util.DOM.windowHeight()/2});var dx=_132.x-this.panStartingPoint.x,dy=_132.y-this.panStartingPoint.y,_133=dx/this.transformSettings.scale,_134=dy/this.transformSettings.scale;this.transformSettings.translateX=(this.transformSettings.startingTranslateX+_133)*-1;this.transformSettings.translateY=(this.transformSettings.startingTranslateY+_134)*-1;this.setStartingScaleAndRotation(_131,0);this.transformSettings.scale=this.transformSettings.startingScale;this.transformSettings.rotation=0;this.applyTransform();},applyTransform:function(){var _135="scale("+this.transformSettings.scale+") rotate("+(this.transformSettings.rotation%360)+"deg) translate("+_11f.parseInt(this.transformSettings.translateX,10)+"px, "+_11f.parseInt(this.transformSettings.translateY,10)+"px)";Util.DOM.setStyle(this.transformEl,{webkitTransform:_135,MozTransform:_135,msTransform:_135,transform:_135});}});}(window,window.klass,window.Code.Util));(function(_136,Util){Util.registerNamespace("Code.PhotoSwipe");var _137=_136.Code.PhotoSwipe;_137.CssClasses={buildingBody:"ps-building",activeBody:"ps-active"};_137.EventTypes={onBeforeShow:"PhotoSwipeOnBeforeShow",onShow:"PhotoSwipeOnShow",onBeforeHide:"PhotoSwipeOnBeforeHide",onHide:"PhotoSwipeOnHide",onDisplayImage:"PhotoSwipeOnDisplayImage",onResetPosition:"PhotoSwipeOnResetPosition",onSlideshowStart:"PhotoSwipeOnSlideshowStart",onSlideshowStop:"PhotoSwipeOnSlideshowStop",onTouch:"PhotoSwipeOnTouch",onBeforeCaptionAndToolbarShow:"PhotoSwipeOnBeforeCaptionAndToolbarShow",onCaptionAndToolbarShow:"PhotoSwipeOnCaptionAndToolbarShow",onBeforeCaptionAndToolbarHide:"PhotoSwipeOnBeforeCaptionAndToolbarHide",onCaptionAndToolbarHide:"PhotoSwipeOnCaptionAndToolbarHide",onToolbarTap:"PhotoSwipeOnToolbarTap"};_137.instances=[];_137.activeInstance=null;_137.setActivateInstance=function(_138){if(!Util.isNothing(_137.activeInstance)){throw "Code.PhotoSwipe.activateInstance: Unable to active instance as another instance is already active";}_137.activeInstance=_138;};_137.unsetActivateInstance=function(){_137.activeInstance=null;};_137.attach=function(_139,_13a,id){var i,_13b,_13c;_13b=_137.createInstance(_139,_13a,id);for(i=0;i<_139.length;i++){_13c=_139[i];if(!Util.isNothing(_13c.nodeType)){if(_13c.nodeType===1){_13c.__photoSwipeClickHandler=_137.onTriggerElementClick.bind(_13b);Util.Events.remove(_13c,"click",_13c.__photoSwipeClickHandler);Util.Events.add(_13c,"click",_13c.__photoSwipeClickHandler);}}}return _13b;};if(_136.jQuery){_136.jQuery.fn.photoSwipe=function(_13d,id){return _137.attach(this,_13d,id);};}_137.detatch=function(_13e){var i,_13f;for(i=0;i<_13e.originalImages.length;i++){_13f=_13e.originalImages[i];if(!Util.isNothing(_13f.nodeType)){if(_13f.nodeType===1){Util.Events.remove(_13f,"click",_13f.__photoSwipeClickHandler);delete _13f.__photoSwipeClickHandler;}}}_137.disposeInstance(_13e);};_137.createInstance=function(_140,_141,id){var i,_142,_143;if(Util.isNothing(_140)){throw "Code.PhotoSwipe.attach: No images passed.";}if(!Util.isLikeArray(_140)){throw "Code.PhotoSwipe.createInstance: Images must be an array of elements or image urls.";}if(_140.length<1){throw "Code.PhotoSwipe.createInstance: No images to passed.";}_141=Util.coalesce(_141,{});_142=_137.getInstance(id);if(Util.isNothing(_142)){_142=new _137.PhotoSwipeClass(_140,_141,id);_137.instances.push(_142);}else{throw "Code.PhotoSwipe.createInstance: Instance with id \""+id+" already exists.\"";}return _142;};_137.disposeInstance=function(_144){var _145=_137.getInstanceIndex(_144);if(_145<0){throw "Code.PhotoSwipe.disposeInstance: Unable to find instance to dispose.";}_144.dispose();_137.instances.splice(_145,1);_144=null;};_137.onTriggerElementClick=function(e){e.preventDefault();var _146=this;_146.show(e.currentTarget);};_137.getInstance=function(id){var i,_147;for(i=0;i<_137.instances.length;i++){_147=_137.instances[i];if(_147.id===id){return _147;}}return null;};_137.getInstanceIndex=function(_148){var i,_149=-1;for(i=0;i<_137.instances.length;i++){if(_137.instances[i]===_148){_149=i;break;}}return _149;};}(window,window.Code.Util));(function(_14a,_14b,Util,_14c,_14d,_14e,_14f,_150,_151){Util.registerNamespace("Code.PhotoSwipe");var _152=_14a.Code.PhotoSwipe;_152.PhotoSwipeClass=_14b({id:null,settings:null,isBackEventSupported:null,backButtonClicked:null,currentIndex:null,originalImages:null,mouseWheelStartTime:null,cache:null,documentOverlay:null,carousel:null,uiLayer:null,toolbar:null,zoomPanRotate:null,windowOrientationChangeHandler:null,windowScrollHandler:null,windowHashChangeHandler:null,keyDownHandler:null,windowOrientationEventName:null,uiLayerTouchHandler:null,carouselSlideByEndHandler:null,carouselSlideshowStartHandler:null,carouselSlideshowStopHandler:null,toolbarTapHandler:null,toolbarBeforeShowHandler:null,toolbarShowHandler:null,toolbarBeforeHideHandler:null,toolbarHideHandler:null,mouseWheelHandler:null,dispose:function(){var prop;Util.Events.remove(this,_152.EventTypes.onBeforeShow);Util.Events.remove(this,_152.EventTypes.onShow);Util.Events.remove(this,_152.EventTypes.onBeforeHide);Util.Events.remove(this,_152.EventTypes.onHide);Util.Events.remove(this,_152.EventTypes.onDisplayImage);Util.Events.remove(this,_152.EventTypes.onResetPosition);Util.Events.remove(this,_152.EventTypes.onSlideshowStart);Util.Events.remove(this,_152.EventTypes.onSlideshowStop);Util.Events.remove(this,_152.EventTypes.onTouch);Util.Events.remove(this,_152.EventTypes.onBeforeCaptionAndToolbarShow);Util.Events.remove(this,_152.EventTypes.onCaptionAndToolbarShow);Util.Events.remove(this,_152.EventTypes.onBeforeCaptionAndToolbarHide);Util.Events.remove(this,_152.EventTypes.onCaptionAndToolbarHide);this.removeEventHandlers();if(!Util.isNothing(this.documentOverlay)){this.documentOverlay.dispose();}if(!Util.isNothing(this.carousel)){this.carousel.dispose();}if(!Util.isNothing(this.uiLayer)){this.uiLayer.dispose();}if(!Util.isNothing(this.toolbar)){this.toolbar.dispose();}this.destroyZoomPanRotate();if(!Util.isNothing(this.cache)){this.cache.dispose();}for(prop in this){if(Util.objectHasProperty(this,prop)){this[prop]=null;}}},initialize:function(_153,_154,id){if(Util.isNothing(id)){this.id="PhotoSwipe"+new Date().getTime().toString();}else{this.id=id;}this.originalImages=_153;if(Util.Browser.isAndroid){if(_14a.navigator.userAgent.indexOf("2.1")>-1){this.isBackEventSupported=true;}}if(!this.isBackEventSupported){this.isBackEventSupported=Util.objectHasProperty(_14a,"onhashchange");}this.settings={fadeInSpeed:250,fadeOutSpeed:250,preventHide:false,preventSlideshow:false,zIndex:1000,backButtonHideEnabled:true,enableKeyboard:true,enableMouseWheel:true,mouseWheelSpeed:350,autoStartSlideshow:false,jQueryMobile:(!Util.isNothing(_14a.jQuery)&&!Util.isNothing(_14a.jQuery.mobile)),jQueryMobileDialogHash:"&ui-state=dialog",loop:true,slideSpeed:250,nextPreviousSlideSpeed:0,enableDrag:true,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:"ease-out",slideshowDelay:3000,doubleTapSpeed:250,margin:20,imageScaleMethod:"fit",captionAndToolbarHide:false,captionAndToolbarFlipPosition:false,captionAndToolbarAutoHideDelay:5000,captionAndToolbarOpacity:0.8,captionAndToolbarShowEmptyCaptions:true,getToolbar:_152.Toolbar.getToolbar,allowUserZoom:true,allowRotationOnUserZoom:false,maxUserZoom:5,minUserZoom:0.5,doubleTapZoomLevel:2.5,getImageSource:_152.Cache.Functions.getImageSource,getImageCaption:_152.Cache.Functions.getImageCaption,getImageMetaData:_152.Cache.Functions.getImageMetaData,cacheMode:_152.Cache.Mode.normal};Util.extend(this.settings,_154);if(this.settings.preventHide){this.settings.backButtonHideEnabled=false;}this.cache=new _14c.CacheClass(_153,this.settings);},show:function(obj){var i;if(Util.isNumber(obj)){this.currentIndex=obj;}else{this.currentIndex=-1;for(i=0;i<this.originalImages.length;i++){if(this.originalImages[i]===obj){this.currentIndex=i;break;}}}if(this.currentIndex<0||this.currentIndex>this.originalImages.length-1){throw "Code.PhotoSwipe.PhotoSwipeClass.show: Starting index out of range";}_152.setActivateInstance(this);Util.DOM.addClass(_14a.document.body,_152.CssClasses.buildingBody);this.createComponents();Util.Events.fire(this,{type:_152.EventTypes.onBeforeShow,target:this});this.documentOverlay.fadeIn(this.settings.fadeInSpeed,this.onDocumentOverlayFadeIn.bind(this));},createComponents:function(){this.documentOverlay=new _14d.DocumentOverlayClass(this.settings);this.carousel=new _14e.CarouselClass(this.cache,this.settings);this.uiLayer=new _150.UILayerClass(this.settings);if(!this.settings.captionAndToolbarHide){this.toolbar=new _14f.ToolbarClass(this.cache,this.settings);}},resetPosition:function(){this.destroyZoomPanRotate();this.documentOverlay.resetPosition();this.carousel.resetPosition();if(!Util.isNothing(this.toolbar)){this.toolbar.resetPosition();}this.uiLayer.resetPosition();Util.Events.fire(this,{type:_152.EventTypes.onResetPosition,target:this});},addEventHandler:function(type,_155){Util.Events.add(this,type,_155);},addEventHandlers:function(){if(Util.isNothing(this.windowOrientationChangeHandler)){this.windowOrientationChangeHandler=this.onWindowOrientationChange.bind(this);this.windowScrollHandler=this.onWindowScroll.bind(this);this.keyDownHandler=this.onKeyDown.bind(this);this.windowHashChangeHandler=this.onWindowHashChange.bind(this);this.uiLayerTouchHandler=this.onUILayerTouch.bind(this);this.carouselSlideByEndHandler=this.onCarouselSlideByEnd.bind(this);this.carouselSlideshowStartHandler=this.onCarouselSlideshowStart.bind(this);this.carouselSlideshowStopHandler=this.onCarouselSlideshowStop.bind(this);this.toolbarTapHandler=this.onToolbarTap.bind(this);this.toolbarBeforeShowHandler=this.onToolbarBeforeShow.bind(this);this.toolbarShowHandler=this.onToolbarShow.bind(this);this.toolbarBeforeHideHandler=this.onToolbarBeforeHide.bind(this);this.toolbarHideHandler=this.onToolbarHide.bind(this);this.mouseWheelHandler=this.onMouseWheel.bind(this);}if(Util.Browser.android){this.orientationEventName="resize";}else{if(Util.Browser.iOS&&(!Util.Browser.safari)){Util.Events.add(_14a.document.body,"orientationchange",this.windowOrientationChangeHandler);}else{var _156=!Util.isNothing(_14a.onorientationchange);this.orientationEventName=_156?"orientationchange":"resize";}}if(!Util.isNothing(this.orientationEventName)){Util.Events.add(_14a,this.orientationEventName,this.windowOrientationChangeHandler);}Util.Events.add(_14a,"scroll",this.windowScrollHandler);if(this.settings.enableKeyboard){Util.Events.add(_14a.document,"keydown",this.keyDownHandler);}if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){this.windowHashChangeHandler=this.onWindowHashChange.bind(this);if(this.settings.jQueryMobile){_14a.location.hash=this.settings.jQueryMobileDialogHash;}else{this.currentHistoryHashValue="PhotoSwipe"+new Date().getTime().toString();_14a.location.hash=this.currentHistoryHashValue;}Util.Events.add(_14a,"hashchange",this.windowHashChangeHandler);}if(this.settings.enableMouseWheel){Util.Events.add(_14a,"mousewheel",this.mouseWheelHandler);}Util.Events.add(this.uiLayer,_152.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler);Util.Events.add(this.carousel,_14e.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler);Util.Events.add(this.carousel,_14e.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler);Util.Events.add(this.carousel,_14e.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler);if(!Util.isNothing(this.toolbar)){Util.Events.add(this.toolbar,_14f.EventTypes.onTap,this.toolbarTapHandler);Util.Events.add(this.toolbar,_14f.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler);Util.Events.add(this.toolbar,_14f.EventTypes.onShow,this.toolbarShowHandler);Util.Events.add(this.toolbar,_14f.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler);Util.Events.add(this.toolbar,_14f.EventTypes.onHide,this.toolbarHideHandler);}},removeEventHandlers:function(){if(Util.Browser.iOS&&(!Util.Browser.safari)){Util.Events.remove(_14a.document.body,"orientationchange",this.windowOrientationChangeHandler);}if(!Util.isNothing(this.orientationEventName)){Util.Events.remove(_14a,this.orientationEventName,this.windowOrientationChangeHandler);}Util.Events.remove(_14a,"scroll",this.windowScrollHandler);if(this.settings.enableKeyboard){Util.Events.remove(_14a.document,"keydown",this.keyDownHandler);}if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){Util.Events.remove(_14a,"hashchange",this.windowHashChangeHandler);}Util.Events.remove(this.uiLayer,_152.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler);Util.Events.remove(this.carousel,_14e.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler);Util.Events.remove(this.carousel,_14e.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler);Util.Events.remove(this.carousel,_14e.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler);if(this.settings.enableMouseWheel){Util.Events.remove(_14a,"mousewheel",this.mouseWheelHandler);}if(!Util.isNothing(this.toolbar)){Util.Events.remove(this.toolbar,_14f.EventTypes.onTap,this.toolbarTapHandler);Util.Events.remove(this.toolbar,_14f.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler);Util.Events.remove(this.toolbar,_14f.EventTypes.onShow,this.toolbarShowHandler);Util.Events.remove(this.toolbar,_14f.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler);Util.Events.remove(this.toolbar,_14f.EventTypes.onHide,this.toolbarHideHandler);}},hide:function(){if(this.settings.preventHide){return;}this.removeEventHandlers();Util.Events.fire(this,{type:_152.EventTypes.onBeforeHide,target:this});this.uiLayer.dispose();this.uiLayer=null;if(!Util.isNothing(this.toolbar)){this.toolbar.dispose();this.toolbar=null;}this.carousel.dispose();this.carousel=null;Util.DOM.removeClass(_14a.document.body,_152.CssClasses.activeBody);this.documentOverlay.dispose();this.documentOverlay=null;_152.unsetActivateInstance();Util.Events.fire(this,{type:_152.EventTypes.onHide,target:this});this.goBackInHistory();},goBackInHistory:function(){if(this.isBackEventSupported&&this.settings.backButtonHideEnabled){if(!this.backButtonClicked){_14a.history.back();}}},play:function(){if(!this.settings.preventSlideshow){if(!Util.isNothing(this.carousel)){this.fadeOutToolbarIfVisible();this.carousel.startSlideshow();}}},stop:function(){if(!Util.isNothing(this.carousel)){this.carousel.stopSlideshow();}},previous:function(){if(!Util.isNothing(this.carousel)){this.carousel.previous();}},next:function(){if(!Util.isNothing(this.carousel)){this.carousel.next();}},toggleToolbar:function(){if(!Util.isNothing(this.toolbar)){this.toolbar.toggleVisibility(this.currentIndex);}},fadeOutToolbarIfVisible:function(){if(!Util.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.settings.captionAndToolbarAutoHideDelay>0){this.toolbar.fadeOut();}},createZoomPanRotate:function(){this.stop();if(this.canUserZoom()&&!this.isZoomActive()){this.zoomPanRotate=new _151.ZoomPanRotateClass(this.settings,this.cache.images[this.currentIndex],this.uiLayer);this.fadeOutToolbarIfVisible();}},destroyZoomPanRotate:function(){if(!Util.isNothing(this.zoomPanRotate)){this.zoomPanRotate.dispose();this.zoomPanRotate=null;}},canUserZoom:function(){var _157,_158;if(Util.Browser.msie){_157=document.createElement("div");if(Util.isNothing(_157.style.msTransform)){return false;}}else{if(!Util.Browser.isCSSTransformSupported){return false;}}if(!this.settings.allowUserZoom){return false;}if(this.carousel.isSliding){return false;}_158=this.cache.images[this.currentIndex];if(Util.isNothing(_158)){return false;}if(_158.isLoading){return false;}return true;},isZoomActive:function(){return (!Util.isNothing(this.zoomPanRotate));},getCurrentImage:function(){return this.cache.images[this.currentIndex];},onDocumentOverlayFadeIn:function(e){_14a.setTimeout(function(){Util.DOM.removeClass(_14a.document.body,_152.CssClasses.buildingBody);Util.DOM.addClass(_14a.document.body,_152.CssClasses.activeBody);this.addEventHandlers();this.carousel.show(this.currentIndex);this.uiLayer.show();if(this.settings.autoStartSlideshow){this.play();}else{if(!Util.isNothing(this.toolbar)){this.toolbar.show(this.currentIndex);}}Util.Events.fire(this,{type:_152.EventTypes.onShow,target:this});}.bind(this),250);},onWindowScroll:function(e){this.resetPosition();},onWindowOrientationChange:function(e){this.resetPosition();},onWindowHashChange:function(e){var _159="#"+((this.settings.jQueryMobile)?this.settings.jQueryMobileDialogHash:this.currentHistoryHashValue);if(_14a.location.hash!==_159){this.backButtonClicked=true;this.hide();}},onKeyDown:function(e){if(e.keyCode===37){e.preventDefault();this.previous();}else{if(e.keyCode===39){e.preventDefault();this.next();}else{if(e.keyCode===38||e.keyCode===40){e.preventDefault();}else{if(e.keyCode===27){e.preventDefault();this.hide();}else{if(e.keyCode===32){if(!this.settings.hideToolbar){this.toggleToolbar();}else{this.hide();}e.preventDefault();}else{if(e.keyCode===13){e.preventDefault();this.play();}}}}}}},onUILayerTouch:function(e){if(this.isZoomActive()){switch(e.action){case _152.TouchElement.ActionTypes.gestureChange:this.zoomPanRotate.zoomRotate(e.scale,(this.settings.allowRotationOnUserZoom)?e.rotation:0);break;case _152.TouchElement.ActionTypes.gestureEnd:this.zoomPanRotate.setStartingScaleAndRotation(e.scale,(this.settings.allowRotationOnUserZoom)?e.rotation:0);break;case _152.TouchElement.ActionTypes.touchStart:this.zoomPanRotate.panStart(e.point);break;case _152.TouchElement.ActionTypes.touchMove:this.zoomPanRotate.pan(e.point);break;case _152.TouchElement.ActionTypes.doubleTap:this.destroyZoomPanRotate();this.toggleToolbar();break;case _152.TouchElement.ActionTypes.swipeLeft:this.destroyZoomPanRotate();this.next();this.toggleToolbar();break;case _152.TouchElement.ActionTypes.swipeRight:this.destroyZoomPanRotate();this.previous();this.toggleToolbar();break;}}else{switch(e.action){case _152.TouchElement.ActionTypes.touchMove:case _152.TouchElement.ActionTypes.swipeLeft:case _152.TouchElement.ActionTypes.swipeRight:this.fadeOutToolbarIfVisible();this.carousel.onTouch(e.action,e.point);break;case _152.TouchElement.ActionTypes.touchStart:case _152.TouchElement.ActionTypes.touchEnd:this.carousel.onTouch(e.action,e.point);break;case _152.TouchElement.ActionTypes.tap:this.toggleToolbar();break;case _152.TouchElement.ActionTypes.doubleTap:e.point.x-=Util.DOM.windowScrollLeft();e.point.y-=Util.DOM.windowScrollTop();var _15a=this.cache.images[this.currentIndex].imageEl,_15b=_14a.parseInt(Util.DOM.getStyle(_15a,"top"),10),_15c=_14a.parseInt(Util.DOM.getStyle(_15a,"left"),10),_15d=_15c+Util.DOM.width(_15a),_15e=_15b+Util.DOM.height(_15a);if(e.point.x<_15c){e.point.x=_15c;}else{if(e.point.x>_15d){e.point.x=_15d;}}if(e.point.y<_15b){e.point.y=_15b;}else{if(e.point.y>_15e){e.point.y=_15e;}}this.createZoomPanRotate();if(this.isZoomActive()){this.zoomPanRotate.zoomAndPanToPoint(this.settings.doubleTapZoomLevel,e.point);}break;case _152.TouchElement.ActionTypes.gestureStart:this.createZoomPanRotate();break;}}Util.Events.fire(this,{type:_152.EventTypes.onTouch,target:this,point:e.point,action:e.action});},onCarouselSlideByEnd:function(e){this.currentIndex=e.cacheIndex;if(!Util.isNothing(this.toolbar)){this.toolbar.setCaption(this.currentIndex);this.toolbar.setToolbarStatus(this.currentIndex);}Util.Events.fire(this,{type:_152.EventTypes.onDisplayImage,target:this,action:e.action,index:e.cacheIndex});},onToolbarTap:function(e){switch(e.action){case _14f.ToolbarAction.next:this.next();break;case _14f.ToolbarAction.previous:this.previous();break;case _14f.ToolbarAction.close:this.hide();break;case _14f.ToolbarAction.play:this.play();break;}Util.Events.fire(this,{type:_152.EventTypes.onToolbarTap,target:this,toolbarAction:e.action,tapTarget:e.tapTarget});},onMouseWheel:function(e){var _15f=Util.Events.getWheelDelta(e),dt=e.timeStamp-(this.mouseWheelStartTime||0);if(dt<this.settings.mouseWheelSpeed){return;}this.mouseWheelStartTime=e.timeStamp;if(this.settings.invertMouseWheel){_15f=_15f*-1;}if(_15f<0){this.next();}else{if(_15f>0){this.previous();}}},onCarouselSlideshowStart:function(e){Util.Events.fire(this,{type:_152.EventTypes.onSlideshowStart,target:this});},onCarouselSlideshowStop:function(e){Util.Events.fire(this,{type:_152.EventTypes.onSlideshowStop,target:this});},onToolbarBeforeShow:function(e){Util.Events.fire(this,{type:_152.EventTypes.onBeforeCaptionAndToolbarShow,target:this});},onToolbarShow:function(e){Util.Events.fire(this,{type:_152.EventTypes.onCaptionAndToolbarShow,target:this});},onToolbarBeforeHide:function(e){Util.Events.fire(this,{type:_152.EventTypes.onBeforeCaptionAndToolbarHide,target:this});},onToolbarHide:function(e){Util.Events.fire(this,{type:_152.EventTypes.onCaptionAndToolbarHide,target:this});}});}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Cache,window.Code.PhotoSwipe.DocumentOverlay,window.Code.PhotoSwipe.Carousel,window.Code.PhotoSwipe.Toolbar,window.Code.PhotoSwipe.UILayer,window.Code.PhotoSwipe.ZoomPanRotate));<!--Copyright(c)2011byCodeComputerlove(http://www.codecomputerlove.com)LicensedundertheMITlicenseversion:2.0.3//-->